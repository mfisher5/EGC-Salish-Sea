knitr::opts_chunk$set(echo = FALSE)
library(tidyverse)
library(here)
library(magrittr)
library(ggplot2)
library(ggrepel)
library(ggmap)
here::here()
metadat <- 'data/WASS_metadata.csv'
dat <- read_csv(here(metadat))
library(janitor)
dat <- read_csv(here(metadat)) %>% clean_names()
colnames(dat)
dat <- read_csv(here(metadat)) %>% clean_names()
dat_summary <- dat %>% group_by(site, collection_year) %>%
summarise(n=length(unique(sample_id)))
## generate basemap from google maps
ggmap::register_google(key = "zd76vn8aM0DwO-ImFMVHUvNwIdk=")
myLocation <- c(-123.28, 48.14, -122.76, 49.0)
ps <- get_stamenmap(bbox=myLocation,
maptype="terrain", crop=FALSE, force=TRUE)
saveRDS(willapa,here("data","metadata","pugetsound_terrain_background.rds"))
saveRDS(ps,here("data","metadata","pugetsound_terrain_background.rds"))
saveRDS(ps,here("data","pugetsound_terrain_background.rds"))
View(dat_summary)
metadat <- 'data/WASS_metadata.csv'
dat <- read_csv(here(metadat)) %>% clean_names()
dat_summary <- dat %>% group_by(site, collection_year, lat, lon) %>%
summarise(n=length(unique(sample_id)))
dat_summary <- dat %>% group_by(site, collection_year, lat, long) %>%
summarise(n=length(unique(sample_id)))
View(dat_summary)
ggmap(ps) +
geom_point(data=mapdat, aes(x=longitude,y=latitude, col=type), size=6) +
geom_label_repel(data=dat_summary, aes(x=long,y=lat, label=site),
segment.colour = 'black',
nudge_x=-0.1,
force=1, force_pull=0.2, segment.size=0.05, size=4) +
ylab("Latitude") + xlab("Longitude") +
scale_color_manual(values=c("chocolate1","chartreuse2")) +
theme(axis.title=element_text(size=14),
axis.text=element_text(size=12),
legend.title=element_blank(),
legend.text=element_text(size=12), legend.position="top")
ggmap(ps) +
geom_point(data=dat_summary, aes(x=longitude,y=latitude, col=type), size=6) +
geom_label_repel(data=dat_summary, aes(x=long,y=lat, label=site),
segment.colour = 'black',
nudge_x=-0.1,
force=1, force_pull=0.2, segment.size=0.05, size=4) +
ylab("Latitude") + xlab("Longitude") +
scale_color_manual(values=c("chocolate1","chartreuse2")) +
theme(axis.title=element_text(size=14),
axis.text=element_text(size=12),
legend.title=element_blank(),
legend.text=element_text(size=12), legend.position="top")
ggmap(ps) +
geom_point(data=dat_summary, aes(x=long,y=lat, col=collection_year), size=6) +
geom_label_repel(data=dat_summary, aes(x=long,y=lat, label=site),
segment.colour = 'black',
nudge_x=-0.1,
force=1, force_pull=0.2, segment.size=0.05, size=4) +
ylab("Latitude") + xlab("Longitude") +
# scale_color_manual(values=c()) +
theme(axis.title=element_text(size=14),
axis.text=element_text(size=12),
legend.title=element_blank(),
legend.text=element_text(size=12), legend.position="top")
ggmap(ps) +
geom_point(data=dat_summary, aes(x=long,y=lat, col=as.factor(collection_year)), size=6) +
geom_label_repel(data=dat_summary, aes(x=long,y=lat, label=site),
segment.colour = 'black',
nudge_x=-0.1,
force=1, force_pull=0.2, segment.size=0.05, size=4) +
ylab("Latitude") + xlab("Longitude") +
# scale_color_manual(values=c()) +
theme(axis.title=element_text(size=14),
axis.text=element_text(size=12),
legend.title=element_blank(),
legend.text=element_text(size=12), legend.position="top")
dat <- read_csv(here(metadat)) %>% clean_names()
dat_summary <- dat %>% group_by(site, lat, long) %>%
summarise(n=length(unique(sample_id)))
myLocation <- c(-123.5, 47.8, -122.1, 49.0)
ps <- get_stamenmap(bbox=myLocation,
maptype="terrain", crop=FALSE, force=TRUE)
saveRDS(ps,here("data","nps_terrain_background.rds"))
ggmap(ps) +
geom_point(data=dat_summary, aes(x=long,y=lat, col=as.factor(collection_year)), size=6) +
geom_label_repel(data=dat_summary, aes(x=long,y=lat, label=site),
segment.colour = 'black',
nudge_x=-0.1,
force=1, force_pull=0.2, segment.size=0.05, size=4) +
ylab("Latitude") + xlab("Longitude") +
# scale_color_manual(values=c()) +
theme(axis.title=element_text(size=14),
axis.text=element_text(size=12),
legend.title=element_blank(),
legend.text=element_text(size=12), legend.position="top")
ggmap(ps) +
geom_point(data=dat_summary, aes(x=long,y=lat), size=6) +
geom_label_repel(data=dat_summary, aes(x=long,y=lat, label=site),
segment.colour = 'black',
nudge_x=-0.1,
force=1, force_pull=0.2, segment.size=0.05, size=4) +
ylab("Latitude") + xlab("Longitude") +
theme(axis.title=element_text(size=14),
axis.text=element_text(size=12),
legend.title=element_blank(),
legend.text=element_text(size=12), legend.position="top")
ps <- get_stamenmap(bbox=myLocation,
maptype="terrain-background", crop=FALSE, force=TRUE)
ggmap(ps) +
geom_point(data=dat_summary, aes(x=long,y=lat), size=6) +
geom_label_repel(data=dat_summary, aes(x=long,y=lat, label=site),
segment.colour = 'black',
nudge_x=-0.1,
force=1, force_pull=0.2, segment.size=0.05, size=4) +
theme(axis.title=element_text(size=14),
axis.text=element_text(size=12),
legend.title=element_blank(),
legend.text=element_text(size=12), legend.position="top")
ggmap(ps) +
geom_point(data=dat_summary, aes(x=long,y=lat), size=6) +
geom_label_repel(data=dat_summary, aes(x=long,y=lat, label=site),
segment.colour = 'black',
nudge_x=-0.2,
force=1, force_pull=0.2, segment.size=0.05, size=4) +
theme(axis.title=element_text(size=14),
axis.text=element_text(size=12),
legend.title=element_blank(),
legend.text=element_text(size=12), legend.position="top")
ggmap(ps) +
geom_point(data=dat_summary, aes(x=long,y=lat), size=6) +
geom_label_repel(data=dat_summary, aes(x=long,y=lat, label=site),
segment.colour = 'black',
nudge_x=c(-0.4,0.4),
force=1, force_pull=0.2, segment.size=0.05, size=4) +
theme(axis.title=element_text(size=14),
axis.text=element_text(size=12),
legend.title=element_blank(),
legend.text=element_text(size=12), legend.position="top")
ps <- readRDS(here("data","nps_terrain_background.rds"))
ggmap(ps) +
geom_point(data=dat_summary, aes(x=long,y=lat), size=6) +
geom_label_repel(data=dat_summary, aes(x=long,y=lat, label=site),
segment.colour = 'black',
nudge_x=c(-0.4,0.4),
force=1, force_pull=0.2, segment.size=0.05, size=4) +
theme(axis.title=element_text(size=14),
axis.text=element_text(size=12),
legend.title=element_blank(),
legend.text=element_text(size=12), legend.position="top")
ggmap(ps) +
geom_point(data=dat_summary, aes(x=long,y=lat), size=6) +
geom_label_repel(data=dat_summary, aes(x=long,y=lat, label=site),
segment.colour = 'black',
nudge_x=c(-0.4,0.4),
force=1, force_pull=0.2, segment.size=0.05, size=4) +
theme(axis.title=element_text(size=14),
axis.text=element_text(size=12),
legend.title=element_blank(),
legend.text=element_text(size=12), legend.position="top")
png(here("data","northps_map.png"), width=1000, height=800)
ggmap(ps) +
geom_point(data=dat_summary, aes(x=long,y=lat), size=6) +
geom_label_repel(data=dat_summary, aes(x=long,y=lat, label=site),
segment.colour = 'black',
nudge_x=c(-0.4,0.4),
force=1, force_pull=0.2, segment.size=0.05, size=4) +
theme(axis.title=element_text(size=14),
axis.text=element_text(size=12),
legend.title=element_blank(),
legend.text=element_text(size=12), legend.position="top")
dev.off()
png(here("data","northps_map.png"), width=800, height=600)
ggmap(ps) +
geom_point(data=dat_summary, aes(x=long,y=lat), size=6) +
geom_label_repel(data=dat_summary, aes(x=long,y=lat, label=site),
segment.colour = 'black',
nudge_x=c(-0.4,0.4),
force=1, force_pull=0.2, segment.size=0.05, size=4) +
theme(axis.title=element_text(size=14),
axis.text=element_text(size=12),
legend.title=element_blank(),
legend.text=element_text(size=12), legend.position="top")
dev.off()
png(here("data","northps_map.png"), width=1000, height=800)
ggmap(ps) +
geom_point(data=dat_summary, aes(x=long,y=lat), size=6) +
geom_label_repel(data=dat_summary, aes(x=long,y=lat, label=site),
segment.colour = 'black',
nudge_x=c(-0.4,0.4),
force=1, force_pull=0.2, segment.size=0.05, size=6) +
theme(axis.title=element_blank(),
axis.text=element_blank(),
legend.title=element_blank())
dev.off()
png(here("data","northps_map.png"), width=800, height=1000)
ggmap(ps) +
geom_point(data=dat_summary, aes(x=long,y=lat), size=6) +
geom_label_repel(data=dat_summary, aes(x=long,y=lat, label=site),
segment.colour = 'black',
nudge_x=c(-0.4,0.4),
force=1, force_pull=0.2, segment.size=0.05, size=8) +
theme(axis.title=element_blank(),
axis.text=element_blank(),
legend.title=element_blank())
dev.off()
png(here("data","northps_map.png"), width=800, height=1000)
ggmap(ps) +
geom_point(data=dat_summary, aes(x=long,y=lat), size=6) +
geom_label_repel(data=dat_summary, aes(x=long,y=lat, label=site),
segment.colour = 'black',
nudge_x=c(-0.4,0.4),
force=1, force_pull=0.2, segment.size=0.05, size=10) +
theme(axis.title=element_blank(),
axis.text=element_blank(),
legend.title=element_blank())
dev.off()
png(here("data","northps_map.png"), width=800, height=1000)
ggmap(ps) +
geom_point(data=dat_summary, aes(x=long,y=lat), size=6) +
geom_label_repel(data=dat_summary, aes(x=long,y=lat, label=site),
segment.colour = 'black',
nudge_x=c(-0.4,0.4),
force=1, force_pull=0.2, segment.size=0.05, size=12) +
theme(axis.title=element_blank(),
axis.text=element_blank(),
legend.title=element_blank())
dev.off()
View(dat)
